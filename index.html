<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Narrative Med Chem â€” Discover How Everyday Medicines Work</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap + Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <!-- 3Dmol for molecule hero -->
  <script src="https://unpkg.com/3dmol/build/3Dmol-min.js"></script>
  <style>
    :root{
      --ink:#0b0f19; --ink-2:#111827; --glow:#7dd3fc; --glass:rgba(255,255,255,.06);
      --border:rgba(255,255,255,.10); --muted:#a7b1c2;
    }
    html,body{background:var(--ink);color:#e9eef5}
    .hero{
      background:
        radial-gradient(1200px 600px at 20% -20%, #1b2852 0, transparent 70%),
        radial-gradient(800px 400px at 100% 0, #16233f 0, transparent 70%);
    }
    .glass{background:var(--glass);backdrop-filter:blur(6px);border:1px solid var(--border);border-radius:16px}
    .soft{border-radius:16px;border:1px solid var(--border)}
    .tag{border-radius:999px;background:#1b2852;color:#cfe3ff;padding:.25rem .6rem;font-size:.85rem}
    a.link{color:#9fe7ff;text-decoration:none} a.link:hover{text-decoration:underline}
    .viewer{height:420px;border-radius:12px;border:1px solid var(--border)}
    .card.hov{transition:transform .25s ease, box-shadow .25s ease}
    .card.hov:hover{transform:translateY(-4px);box-shadow:0 10px 24px rgba(0,0,0,.25)}
    .pill{border-radius:999px}
    .muted{color:var(--muted)}
    .feature i{font-size:1.6rem}
    /* Onboarding overlay */
    #tour{position:fixed;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(3px);display:none;align-items:center;justify-content:center;z-index:2000}
    #tour .pane{max-width:780px}
    /* top progress bar on scroll (optional visual polish) */
    #progress{position:fixed;top:0;left:0;height:3px;width:0;background:var(--glow);z-index:1500;box-shadow:0 0 10px var(--glow)}
  </style>
</head>
<body>
  <div id="progress"></div>

  <!-- NAV -->
  <nav class="navbar navbar-dark navbar-expand-md bg-dark sticky-top border-bottom border-secondary-subtle">
    <div class="container">
      <a class="navbar-brand fw-semibold" href="#"><i class="bi bi-capsule me-1"></i> Narrative Med Chem</a>
      <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#nav"><span class="navbar-toggler-icon"></span></button>
      <div id="nav" class="collapse navbar-collapse">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="#features">Features</a></li>
          <li class="nav-item"><a class="nav-link" href="#drugs">Browse Drugs</a></li>
          <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
          <li class="nav-item ms-2"><a class="btn btn-outline-info pill" href="https://so-sonali.github.io/medchem-hub/" target="_blank"><i class="bi bi-journal-bookmark"></i> Open the Book</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header class="hero py-5">
    <div class="container">
      <div class="row align-items-center g-4">
        <div class="col-lg-7">
          <span class="tag">Interactive â€¢ Story-first â€¢ No textbook required</span>
          <h1 class="display-5 fw-bold mt-2">Discover how everyday medicines work</h1>
          <p class="lead muted">Watch drug stories, make decisions, and learn the science by doing â€” from beginner to PhD.</p>
          <div class="d-flex gap-2 flex-wrap">
            <a href="aspirin.html" class="btn btn-primary btn-lg pill"><i class="bi bi-play-fill"></i> Start with Aspirin</a>
            <a href="#drugs" class="btn btn-outline-light btn-lg pill"><i class="bi bi-grid"></i> Browse all drugs</a>
            <button id="startTour" class="btn btn-outline-info btn-lg pill"><i class="bi bi-question-circle"></i> How it works</button>
          </div>
          <div class="mt-3 small">
            <span class="badge text-bg-info text-dark pill">Edit molecules</span>
            <span class="badge text-bg-warning text-dark pill">Choose-your-own trial</span>
            <span class="badge text-bg-success text-dark pill">UG / Grad / PhD lenses</span>
          </div>
        </div>
        <div class="col-lg-5">
          <div id="aspirin3d" class="viewer glass"></div>
        </div>
      </div>
    </div>
  </header>

  <!-- FEATURES PREVIEW -->
  <section id="features" class="py-5">
    <div class="container">
      <div class="row g-4">
        <div class="col-md-4">
          <div class="glass p-4 h-100 feature">
            <i class="bi bi-bezier2"></i>
            <h3 class="h5 mt-2">Modify molecules, see effects</h3>
            <p class="muted mb-0">Play with substituents and watch predicted properties change (logP, TPSA, H-bonding).</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="glass p-4 h-100 feature">
            <i class="bi bi-joystick"></i>
            <h3 class="h5 mt-2">Learn through stories & choices</h3>
            <p class="muted mb-0">Detective-style narratives with branching outcomes grounded in real drug development.</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="glass p-4 h-100 feature">
            <i class="bi bi-mortarboard"></i>
            <h3 class="h5 mt-2">UG â†’ Grad â†’ PhD</h3>
            <p class="muted mb-0">One story, three lenses. Simple visuals first; math and docking when youâ€™re ready.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- DRUG SHOWCASE GRID -->
  <section id="drugs" class="py-5">
    <div class="container">
      <div class="d-flex align-items-end justify-content-between mb-3">
        <h2 class="h3 m-0">Browse Drug Stories</h2>
        <span class="muted small">More coming soon</span>
      </div>
      <div class="row g-4">
        <!-- Aspirin -->
        <div class="col-sm-6 col-lg-3">
          <div class="card hov bg-dark text-light soft h-100">
            <div class="card-body d-flex flex-column">
              <div class="d-flex align-items-center gap-2 mb-2">
                <i class="bi bi-capsule"></i><strong>Aspirin</strong>
              </div>
              <div class="small muted mb-2">COX acetylation â€¢ prodrug flavor</div>
              <div class="mt-auto d-grid">
                <a href="aspirin.html" class="btn btn-outline-info pill">Open story</a>
              </div>
            </div>
          </div>
        </div>
        <!-- Penicillin -->
        <div class="col-sm-6 col-lg-3">
          <div class="card hov bg-dark text-light soft h-100">
            <div class="card-body d-flex flex-column">
              <div class="d-flex align-items-center gap-2 mb-2">
                <i class="bi bi-bug"></i><strong>Penicillin</strong>
              </div>
              <div class="small muted mb-2">Î²-lactam â€¢ resistance arms race</div>
              <div class="mt-auto d-grid">
                <a href="#" class="btn btn-outline-secondary pill disabled">Coming soon</a>
              </div>
            </div>
          </div>
        </div>
        <!-- Ibuprofen -->
        <div class="col-sm-6 col-lg-3">
          <div class="card hov bg-dark text-light soft h-100">
            <div class="card-body d-flex flex-column">
              <div class="d-flex align-items-center gap-2 mb-2">
                <i class="bi bi-arrow-left-right"></i><strong>Ibuprofen</strong>
              </div>
              <div class="small muted mb-2">Chirality â€¢ S-enantiomer active</div>
              <div class="mt-auto d-grid">
                <a href="#" class="btn btn-outline-secondary pill disabled">Coming soon</a>
              </div>
            </div>
          </div>
        </div>
        <!-- Imatinib -->
        <div class="col-sm-6 col-lg-3">
          <div class="card hov bg-dark text-light soft h-100">
            <div class="card-body d-flex flex-column">
              <div class="d-flex align-items-center gap-2 mb-2">
                <i class="bi bi-cpu"></i><strong>Imatinib</strong>
              </div>
              <div class="small muted mb-2">Kinase targeting â€¢ selectivity</div>
              <div class="mt-auto d-grid">
                <a href="#" class="btn btn-outline-secondary pill disabled">Coming soon</a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick path chips -->
      <div class="d-flex flex-wrap gap-2 mt-4">
        <span class="tag"><i class="bi bi-palette2 me-1"></i> Visual first</span>
        <span class="tag"><i class="bi bi-graph-up-arrow me-1"></i> Data when ready</span>
        <span class="tag"><i class="bi bi-diagram-3 me-1"></i> Systems view (PhD)</span>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="py-5">
    <div class="container">
      <div class="glass p-4">
        <h2 class="h4">What is this?</h2>
        <p class="muted mb-2">
          <strong>Narrative Med Chem</strong> teaches medicinal chemistry through interactive stories of real drugs.
          You wonâ€™t slog through walls of text â€” youâ€™ll <em>watch</em> the problem, <em>make</em> the fix, and <em>see</em> the consequences.
        </p>
        <ul class="mb-0">
          <li>Everyday drugs as characters (Aspirin, Penicillin, Ibuprofen, Imatinib)</li>
          <li>Branching decisions tied to real clinical and chemical trade-offs</li>
          <li>Multi-level lenses: ðŸŽ¨ Simple â€¢ ðŸ“Š Detailed â€¢ ðŸ”¬ Advanced</li>
        </ul>
      </div>
      <p class="small mt-3 muted">Deeper notes and reproducible notebooks live in our <a class="link" target="_blank" href="https://so-sonali.github.io/medchem-hub/">Jupyter Book</a>.</p>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="py-5 border-top border-secondary-subtle">
    <div class="container small">
      <div class="row g-3 align-items-center">
        <div class="col-md-8">
          <div class="glass p-3">Educational content only. Not medical advice.</div>
        </div>
        <div class="col-md-4 text-md-end">
          <a class="link" href="aspirin.html"><i class="bi bi-play-fill"></i> Start with Aspirin</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Onboarding Overlay -->
  <div id="tour">
    <div class="pane glass p-4">
      <h3 class="h4 mb-2"><i class="bi bi-stars me-1"></i> Welcome!</h3>
      <p class="mb-2">This site teaches medicinal chemistry through <em>interactive drug stories</em>.</p>
      <ol class="mb-2">
        <li><strong>Start with Aspirin</strong> for a short story with choices.</li>
        <li>Use the <strong>drug cards</strong> to browse other stories.</li>
        <li>Open the <strong>Book</strong> for deeper notes & notebooks.</li>
      </ol>
      <div class="text-end">
        <button id="closeTour" class="btn btn-primary pill">Letâ€™s go</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Hero molecule (Aspirin CID 2244)
    (async () => {
      try{
        const el = document.getElementById("aspirin3d");
        const v = $3Dmol.createViewer(el,{backgroundColor:"white"});
        const r = await fetch("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/CID/2244/SDF?record_type=3d");
        v.addModel(await r.text(),"sdf");
        v.setStyle({}, {stick:{radius:0.15}, sphere:{scale:0.22}});
        v.addStyle({elem:"O"}, {sphere:{scale:0.26}});
        v.zoomTo(); v.render();
      } catch(e){ console.error(e); }
    })();

    // Simple scroll progress bar
    const bar = document.getElementById('progress');
    const setProgress = () => {
      const scrolled = window.scrollY;
      const h = document.body.scrollHeight - innerHeight;
      bar.style.width = Math.max(0, Math.min(1, scrolled / h)) * 100 + '%';
    };
    addEventListener('scroll', setProgress, {passive:true});
    addEventListener('resize', setProgress);
    document.addEventListener('DOMContentLoaded', setProgress);

    // First-visit onboarding (localStorage flag)
    const tour = document.getElementById('tour');
    const seen = localStorage.getItem('nmc_tour_seen');
    if(!seen){ tour.style.display='flex'; }
    document.getElementById('startTour').addEventListener('click', ()=>{ tour.style.display='flex'; });
    document.getElementById('closeTour').addEventListener('click', ()=>{
      tour.style.display='none'; localStorage.setItem('nmc_tour_seen','1');
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
